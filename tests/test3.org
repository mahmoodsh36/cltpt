#+begin_src lisp
  (def-streamable mystruct
    property1
    property2)
#+end_src

#+begin_src lisp :name blk1 :output %'(plist plist mystruct) :delimiter %(string #\newline)
  (loop for item in `((:name "myname" :property1 "value1")
                      (:name "myname2" :property1 "value2")
                      ,(make-mystruct :property1 "one" :property2 "two")
                      ;; we can add more, the last type in :output is for the last objects in the "stream"
                      ,(make-mystruct :property1 "three" :property2 "four"))
        do (format t "%~A~%" item))
#+end_src

# output of the src block above will be:
- %(:name "myname" :property1 "value1")
- %(:name "myname2" :property1 "value2")
- %(mydefstruct :property1 "one" :property2 "two")
- %(mydefstruct :property1 "three" :property2 "four")

#+begin_src python :name blk2
  @run_once
  class MyData:
      def __init__(self, myprop1, myprop2):
          self.myprop1 = myprop1
          self.myprop2 = myprop2

  MyData('%(getf blk1 :property1)', '%(getf blk1 :property2)')
#+end_src

#+begin_src python :name blk3
  f'%(make-mydefstruct :property1 {blk1.prop1} :property2 {blk1.prop2})'
#+end_src

#+begin_src python :input blk1 :encoder blk2 :decoder bkl3 :name blk4
  :output %'(cltpt/combinator:separated-atleast-one
             ,(string #\newline) (:name myline (cltpt/combinator:any)))
  :transform %'(cltpt/org-mode:org-list-matcher (:name myline (cltpt/combinator:any)))
  for item in blk1:
    if type(blk1) == MyData:
      print('prop1 is: ' + blk1.property1 + ', and prop2 is: ' + blk1.property2)
#+end_src

# output should be:
- "prop1 is: one, prop2 is: two"
- "prop1 is: three, prop2 is: four"